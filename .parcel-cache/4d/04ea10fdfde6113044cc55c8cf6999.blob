var _content = require('./content');
var _parcelHelpers = require("@parcel/transformer-js/lib/esmodule-helpers.js");
var _contentDefault = _parcelHelpers.interopDefault(_content);
var tags = document.querySelector('input[name=subject]');
// TAGIFYING
var tagify1 = new Tagify(tags, {
  whitelist: ['INFO1110', 'COMP2000']
});
// 
const newContent = document.getElementById('new-content');
const createContentForm = document.getElementById('create-content-form');
var overlayToggle = false;
const modalBackground = document.getElementById('modal-background');
newContent.addEventListener('click', function () {
  openContentForm();
});
function openContentForm(type) {
  if (type == 'update') {}
  if (overlayToggle == false) {
    createContentForm.classList.add('active');
    overlayToggle = true;
    modalBackground.style.display = 'flex';
  } else if (overlayToggle == true) {
    createContentForm.classList.remove('active');
    createContentForm.reset();
    overlayToggle = false;
    modalBackground.style.display = 'none';
  }
}
// adding event listeners to edit buttons
function reupdate() {
  // each card has an edit button that allows users to reaccess and update task details
  let editButtons = document.querySelectorAll('.edit-content');
  editButtons.forEach(function (editButton) {
    // if there hasn't been a listener previously attached, attach one
    if (editButton.getAttribute('listener') !== 'true') {
      editButton.addEventListener('click', addAutoFill);
      editButton.setAttribute('listener', 'true');
    }
    function addAutoFill() {
      autoFillTaskDetails(editButton);
    }
  });
}
// function autoFillTaskDetails(object) {
// let objectId = object.parentElement.id;
// objectId = objectId.replace('t-', '')
// taskList.forEach(function(task) {})
// }
var contentList = [];
const contentSaveButton = document.getElementById('content-save');
const contentCancelButton = document.getElementById('edit-content-cancel');
const contentCloseButton = contentCancelButton.nextElementSibling;
const contentDeleteButton = document.getElementById('edit-content-delete');
contentCancelButton.addEventListener('click', function (event) {
  event.preventDefault();
  openContentForm();
  reupdate();
});
contentCloseButton.addEventListener('click', function (event) {
  event.preventDefault();
  openContentForm();
  reupdate();
});
// contentDeleteButton.addEventListener()
contentSaveButton.addEventListener('click', function (event) {
  event.preventDefault();
  let contentDetails, content, contentID, contentTitle, contentDescription, contentLink, contentSubject, contentGroup;
  // //
  // let taskID;
  // if (createTaskForm.classList.contains('update')) {
  // taskID = parseInt(taskSaveButton.value)
  // for (let i = 0; i < taskList.length; i++) {
  // var oldTask = taskList[i]
  // if (oldTask.id == taskID) {
  // taskList.splice(taskList.indexOf(oldTask), 1)
  // let oldCard = document.getElementById('t-' + taskID)
  // oldCard.remove();
  // taskSaveButton.value = ''
  // }
  // }
  // } else {
  // taskID = Date.now()
  // }
  // /
  contentID = Date.now();
  contentDetails = createContentForm.querySelectorAll('form input');
  contentTitle = contentDetails[0].value;
  contentDescription = contentDetails[1].value;
  contentLink = contentDetails[2].value;
  contentSubject = contentDetails[3].value;
  let groups = createContentForm.querySelector('select[name=group]');
  contentGroup = groups.value;
  content = new _contentDefault.default(contentID, contentTitle, contentDescription, contentLink, contentSubject, contentGroup, contentList);
  content.createCard(content.addContent());
  openContentForm();
});
